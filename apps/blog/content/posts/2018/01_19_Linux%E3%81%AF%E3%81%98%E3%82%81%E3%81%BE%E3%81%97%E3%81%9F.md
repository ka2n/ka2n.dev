---
title: Linuxはじめました
date: 2018-01-19T08:28:59.000Z
id: "8599973812339013236"
draft: true
---
仕事をはじめてからMacbookAirを2枚ほど使い続けてきて、一昨年にMacBookPro 15' 2016のもりもりモデルを使っていたが、ハードウェアの完成度に嫌気が差してしまった。Appleは大きなモデルチェンジ前の最終モデルが一番良いとはわかっていたが、つい、TouchBarが導入されたタイミングで飛びついてしまった。

- Integrated GPUとDiscrete GPUの切り替えがうまくいかず、スリープからの復帰時や外部ディスプレイの接続時に画面がブラックアウトしたり真っ赤になったりして操作不能
- 普通に閉じてスリープしていたつもりがシャットダウンしていた
- キーボードのShiftキーが反応しなくなる、反応しづらくなる。掃除したが改善せず
- Tunderbolt3のコネクタがすぐはずれる

ざっとこれくらいの不満がありました。
そこで、昔から憧れていた赤乳首、ThinkPadを購入したのでした。
楽しくてどんどん設定してしまったので一部抜けているかもしれないけど、やったことを列挙しておく。
ArchLinux系の設定で困ったら[https://wiki.archlinux.org/:title]を探せば大抵のことは載っているのがすごく助かった。

- 下準備
  - BIOSをアップデート
  - Windowsをひととおりアップデート
  - Windowsの回復ディスクを作る
  - Manjaro Linuxのインストールディスクを作る
- ディスクは全部削除してManjaro LinuxのXFCE版をインストール
- しばらくXFCEを楽しんだのでi3wmをインストール
- 各種ソフトウェアのインストールと設定
  - X関連
    - .Xresources
      - 外部ディスプレイを接続するとマウスポインターが巨大になるので
`Xcursor.size: 16`を指定
    - インプットメソッドとしてfcitx, mozcをインストールして`.xprofile`で指定
    - キーボード関連
      - CapsLockをCtrlに変更: `localectl set-x11-keymap us pc105 "" ctrl:nocaps`
  - yaourt
  - tmux
  - fish
  - VSCode
  - nodeenv
  - rubyenv
  - ssh-agentを起動するように設定
  - dockerをインストール
  - TLPの設定
    - `systemctl mask systemd-rfkill.socket systemd-rfkill.service`
  - i3wm
    - `~/.config/autostart`を起動するためにdexを使う
    - XFCEの設定パネルとかを使いたいのでxfsettingsdを自動起動する
    - キーボードの設定
      - 音量
      - Fn+F8でWWANのON/OFFをトグルするスクリプトを動かす
      - dmenuをやめてrofiにする

まだやっていないけどやりたいこと
- WWANの時はDropboxを止めたい(NetworkManager-dispatcherを使うとできそう)
